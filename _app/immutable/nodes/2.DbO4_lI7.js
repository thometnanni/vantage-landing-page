import{f as A,a as T,c as ve}from"../chunks/BArpSiJ7.js";import"../chunks/0waum1Sv.js";import{o as ae}from"../chunks/BP7RbBvP.js";import{I as H,i as R,N as be,y as Y,j as Ce,D as _e,g as x,av as Le,F as Be,H as Ie,G as ge,J as $,A as D,Y as Ee,aq as Me,a8 as ue,q as Ne,z as oe,C as Ve,ao as le,aK as ze,W as pe,aG as B,aL as Ge,aM as Pe,aN as qe,aO as V,v as ke,x as Se,aP as Z,ak as re,an as De,w as Fe,aQ as He,aR as $e,aS as Oe,aT as je,aU as Ye,p as ce,ax as L,n as z,o as I,m as fe,k as ne,t as O,s as U,a9 as ee,K as Ue,aV as We}from"../chunks/C9FWihKz.js";import{i as G,b as ie}from"../chunks/BvFvupHY.js";import{i as de}from"../chunks/BY7w2Zq6.js";import{e as te,s as he}from"../chunks/Yzwz9Dcx.js";function Ke(e,r,o){for(var v=[],d=r.length,n,c=r.length,i=0;i<d;i++){let g=r[i];Se(g,()=>{if(n){if(n.pending.delete(g),n.done.add(g),n.pending.size===0){var l=e.outrogroups;se(le(n.done)),l.delete(n),l.size===0&&(e.outrogroups=null)}}else c-=1},!1)}if(c===0){var w=v.length===0&&o!==null;if(w){var a=o,f=a.parentNode;De(f),f.append(a),e.items.clear()}se(r,!w)}else n={pending:new Set(r),done:new Set},(e.outrogroups??=new Set).add(n)}function se(e,r=!0){for(var o=0;o<e.length;o++)Fe(e[o],r)}var me;function Xe(e,r,o,v,d,n=null){var c=e,i=new Map;{var w=e;c=R?H(be(w)):w.appendChild(Y())}R&&Ce();var a=null,f=Le(()=>{var m=o();return ze(m)?m:m==null?[]:le(m)}),g,l=!0;function h(){u.fallback=a,Je(u,g,c,r,v),a!==null&&(g.length===0?(a.f&V)===0?ke(a):(a.f^=V,F(a,null,c)):Se(a,()=>{a=null}))}var t=_e(()=>{g=x(f);var m=g.length;let p=!1;if(R){var s=Be(c)===Ie;s!==(m===0)&&(c=ge(),H(c),$(!1),p=!0)}for(var y=new Set,_=Ne,E=Ve(),b=0;b<m;b+=1){R&&D.nodeType===Ee&&D.data===Me&&(c=D,p=!0,$(!1));var S=g[b],k=v(S,b),C=l?null:i.get(k);C?(C.v&&ue(C.v,S),C.i&&ue(C.i,b),E&&_.skipped_effects.delete(C.e)):(C=Qe(i,l?c:me??=Y(),S,k,b,d,r,o),l||(C.e.f|=V),i.set(k,C)),y.add(k)}if(m===0&&n&&!a&&(l?a=oe(()=>n(c)):(a=oe(()=>n(me??=Y())),a.f|=V)),R&&m>0&&H(ge()),!l)if(E){for(const[W,M]of i)y.has(W)||_.skipped_effects.add(M.e);_.oncommit(h),_.ondiscard(()=>{})}else h();p&&$(!0),x(f)}),u={effect:t,items:i,outrogroups:null,fallback:a};l=!1,R&&(c=D)}function Je(e,r,o,v,d){var n=r.length,c=e.items,i=e.effect.first,w,a=null,f=[],g=[],l,h,t,u;for(u=0;u<n;u+=1){if(l=r[u],h=d(l,u),t=c.get(h).e,e.outrogroups!==null)for(const k of e.outrogroups)k.pending.delete(t),k.done.delete(t);if((t.f&V)!==0)if(t.f^=V,t===i)F(t,null,o);else{var m=a?a.next:i;t===e.effect.last&&(e.effect.last=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),N(e,a,t),N(e,t,m),F(t,m,o),a=t,f=[],g=[],i=a.next;continue}if((t.f&Z)!==0&&ke(t),t!==i){if(w!==void 0&&w.has(t)){if(f.length<g.length){var p=g[0],s;a=p.prev;var y=f[0],_=f[f.length-1];for(s=0;s<f.length;s+=1)F(f[s],p,o);for(s=0;s<g.length;s+=1)w.delete(g[s]);N(e,y.prev,_.next),N(e,a,y),N(e,_,p),i=p,a=_,u-=1,f=[],g=[]}else w.delete(t),F(t,i,o),N(e,t.prev,t.next),N(e,t,a===null?e.effect.first:a.next),N(e,a,t),a=t;continue}for(f=[],g=[];i!==null&&i!==t;)(w??=new Set).add(i),g.push(i),i=i.next;if(i===null)continue}(t.f&V)===0&&f.push(t),a=t,i=t.next}if(e.outrogroups!==null){for(const k of e.outrogroups)k.pending.size===0&&(se(le(k.done)),e.outrogroups?.delete(k));e.outrogroups.size===0&&(e.outrogroups=null)}if(i!==null||w!==void 0){var E=[];if(w!==void 0)for(t of w)(t.f&Z)===0&&E.push(t);for(;i!==null;)(i.f&Z)===0&&i!==e.fallback&&E.push(i),i=i.next;var b=E.length;if(b>0){var S=n===0?o:null;Ke(e,E,S)}}}function Qe(e,r,o,v,d,n,c,i){var w=(c&Pe)!==0?(c&qe)===0?B(o,!1,!1):pe(o):null,a=(c&Ge)!==0?pe(d):null;return{v:w,i:a,e:oe(()=>(n(r,w??o,a??d,i),()=>{e.delete(v)}))}}function F(e,r,o){if(e.nodes)for(var v=e.nodes.start,d=e.nodes.end,n=r&&(r.f&V)===0?r.nodes.start:o;v!==null;){var c=re(v);if(n.before(v),v===d)return;v=c}}function N(e,r,o){r===null?e.effect.first=o:r.next=o,o===null?e.effect.last=r:o.prev=r}function Ze(e,r){let o=null,v=R;var d;if(R){o=D;for(var n=be(document.head);n!==null&&(n.nodeType!==Ee||n.data!==e);)n=re(n);if(n===null)$(!1);else{var c=re(n);n.remove(),H(c)}}R||(d=document.head.appendChild(Y()));try{_e(()=>r(d),He)}finally{v&&($(!0),H(o))}}function et(e,r){return e==null?null:String(e)}function xe(e,r,o,v){var d=e.__style;if(R||d!==r){var n=et(r);(!R||n!==e.getAttribute("style"))&&(n==null?e.removeAttribute("style"):e.style.cssText=n),e.__style=r}return v}const tt=Symbol("is custom element"),ot=Symbol("is html");function we(e,r,o,v){var d=rt(e);R&&(d[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||d[r]!==(d[r]=o)&&(r==="loading"&&(e[$e]=o),o==null?e.removeAttribute(r):typeof o!="string"&&nt(e).includes(r)?e[r]=o:e.setAttribute(r,o))}function rt(e){return e.__attributes??={[tt]:e.nodeName.includes("-"),[ot]:e.namespaceURI===Oe}}var ye=new Map;function nt(e){var r=e.getAttribute("is")||e.nodeName,o=ye.get(r);if(o)return o;ye.set(r,o=[]);for(var v,d=e,n=Element.prototype;n!==d;){v=Ye(d);for(var c in v)v[c].set&&o.push(c);d=je(d)}return o}var it=A('<div class="p-8 text-center text-red-600"> </div>'),st=A('<p class="text-sm text-gray-400 max-w-xs"> </p>'),at=A('<div class="flex flex-col items-start gap-2"><img class="flex-shrink-0 object-contain rounded" style="max-height: 450px;"/> <!></div>'),lt=A('<div class="flex gap-2 flex-nowrap w-max p-2"></div>'),ct=A('<div class="p-8 text-center text-gray-600">No images found</div>'),ft=A('<div class="gallery w-full overflow-x-auto scroll-smooth svelte-1ocen1q" style="scrollbar-width: none;" role="region" aria-label="gallery"><!></div>');function dt(e,r){ce(r,!1);let o=B([]),v=B(!0),d=B(null),n=B(),c=B(),i=!0,w=!1;const a=30;ae(async()=>{try{const s=await(await fetch("https://api.are.na/v2/channels/vantage-3vctc210p7q")).json();L(o,s.contents.map(y=>({title:y.title||"",url:y.image.display.url})).reverse()),L(v,!1)}catch(p){L(d,p.message),L(v,!1),console.error("Error fetching Are.na channel:",p)}});function f(p){if(!i||!x(n)||!x(c))return;const s=x(n).getBoundingClientRect().width,y=x(c).getBoundingClientRect().width;if(y<=s)return;const _=x(n).getBoundingClientRect(),b=(p.clientX-_.left-a)/(s-a*2),S=y-s;w=!0,x(n).scrollTo({left:S*b,behavior:"instant"}),requestAnimationFrame(()=>w=!1)}function g(){i=!0}function l(){w||(i=!1)}de();var h=ft(),t=z(h);{var u=p=>{},m=p=>{var s=ve(),y=ne(s);{var _=b=>{var S=it(),k=z(S);I(S),O(()=>he(k,`Error: ${x(d)??""}`)),T(b,S)},E=b=>{var S=ve(),k=ne(S);{var C=M=>{var P=lt();Xe(P,5,()=>x(o),q=>q.url,(q,j)=>{var K=at(),X=z(K),Te=U(X,2);{var Re=J=>{var Q=st(),Ae=z(Q,!0);I(Q),O(()=>he(Ae,x(j).title)),T(J,Q)};G(Te,J=>{x(j).title&&J(Re)})}I(K),O(()=>{we(X,"src",x(j).url),we(X,"alt",x(j).title)}),T(q,K)}),I(P),ie(P,q=>L(c,q),()=>x(c)),T(M,P)},W=M=>{var P=ct();T(M,P)};G(k,M=>{x(o).length>0?M(C):M(W,!1)},!0)}T(b,S)};G(y,b=>{x(d)?b(_):b(E,!1)},!0)}T(p,s)};G(t,p=>{x(v)?p(u):p(m,!1)})}I(h),ie(h,p=>L(n,p),()=>x(n)),te("mousemove",h,f),te("mouseenter",h,g),te("scroll",h,l),T(e,h),fe()}var vt=A('<div class="absolute z-[-1px] flex items-start justify-start bg-white pointer-events-auto"><p class="text-base leading-tight text-left text-black m-0 p-3 overflow-hidden">Vantage reconstructs the spatial context of video recordings.</p></div>'),gt=A('<div class="absolute z-[-1px] bg-white overflow-hidden pointer-events-auto"><video autoplay loop src="/demo.mp4" class="w-full h-full object-cover"></video></div>',2),ut=A('<div class="fixed top-2 right-2 z-4 gap-1 flex flex-col items-end"><a href="https://thometnanni.github.io/vantage-renderer/" target="_blank" rel="noopener noreferrer" class="text-xs pointer-events-auto svelte-rl21xe">Demo</a> <a href="mailto:hi@thometnanni.net" class="text-xs pointer-events-auto svelte-rl21xe">Contact us</a></div> <!> <!>',1);function pt(e,r){ce(r,!1);let o=B({x:0,y:0,width:0,height:0}),v=B({x:0,y:0,width:0,height:0});function d(){const f=document.getElementById("svgContainer");if(!f)return;const g=f.getBoundingClientRect(),l=f.closest(".max-w-480"),h=l?l.getBoundingClientRect():g,t=f.querySelector(".box-group.rotate rect");if(t){const m=t.getBBox(),p=t.closest(".box-group").getScreenCTM(),s=f.createSVGPoint();s.x=m.x,s.y=m.y;const y=s.matrixTransform(p);L(o,{x:y.x-h.left,y:y.y+window.scrollY,width:m.width,height:m.height})}const u=f.querySelector(".box-group:not(.rotate) rect");if(u){const m=u.getBBox(),p=u.closest(".box-group").getScreenCTM(),s=f.createSVGPoint();s.x=m.x,s.y=m.y;const y=s.matrixTransform(p);L(v,{x:y.x-h.left,y:y.y+window.scrollY,width:m.width,height:m.height})}}ae(()=>{d();const f=()=>d(),g=()=>d();return window.addEventListener("resize",f),window.addEventListener("scroll",g),()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",g)}}),de();var n=ut(),c=U(ne(n),2);{var i=f=>{var g=vt();O(()=>xe(g,`
      left: ${x(o).x}px;
      top: ${x(o).y}px;
      width: ${x(o).width}px;
      height: ${x(o).height}px;
      transform: rotate(-25deg);
      transform-origin: top left;
    `)),T(f,g)};G(c,f=>{x(o).width>0&&f(i)})}var w=U(c,2);{var a=f=>{var g=gt(),l=z(g);l.muted=!0,I(g),O(()=>xe(g,`
      left: ${x(v).x}px;
      top: ${x(v).y}px;
      width: ${x(v).width}px;
      height: ${x(v).height}px;
    `)),T(f,g)};G(w,f=>{x(v).width>0&&f(a)})}T(e,n),fe()}var ht=A('<meta name="description" content="Vantage reconstructs the spatial context of video recordings."/> <meta property="og:title" content="Vantage"/> <meta property="og:description" content="Vantage reconstructs the spatial context of video recordings."/> <meta property="og:image" content="/cover.jpg"/> <meta property="twitter:card" content="summary_large_image"/> <meta property="twitter:title" content="Vantage"/> <meta property="twitter:description" content="Vantage reconstructs the spatial context of video recordings."/> <meta property="twitter:image" content="/cover.jpg"/>',1),mt=A('<div class="relative z-10 bg-white py-4"><!></div>'),xt=A(`<div class="introContainer"><div class="max-w-480 m-auto"><!> <svg id="svgContainer" xmlns="http://www.w3.org/2000/svg"><g class="box-pair"><g class="box box-group rotate"><rect x="0" y="0" width="300" height="200"></rect></g><g class="lines"><line class="connector-line" stroke="var(--stroke, lime)" stroke-width="2"></line><line class="connector-line" stroke="var(--stroke, lime)" stroke-width="2"></line><line class="connector-line" stroke="var(--stroke, lime)" stroke-width="2"></line><line class="connector-line" stroke="var(--stroke, lime)" stroke-width="2"></line></g><g class="box box-group box"><rect x="30%" y="200" width="65%" height="460"></rect></g></g></svg></div> <div class="bg-white"><div class="max-w-480 m-auto"><div class="info p-2"><div><p><strong>Vantage</strong> is a web-based collection of <strong>spatial reconstruction toolkits for analysing photos and videos</strong>, designed for <strong>investigative journalists and fact-checkers</strong>,
            particularly those working in small teams or independently.</p></div> <div><p>Images and videos sourced from social media often represent crucial
            working material â€” and, in conflict areas, sometimes the only
            available source.</p> <p>This persuasive visual material demands rigorous verification: do
            the time and place of the footage correspond to the claimed event?
            What is actually visible in the images? How do clips from different
            angles relate to each other?</p> <p>Vantage enables perspectival reconstruction by projecting images and
            videos onto <strong>3D models of terrain and buildings</strong>, supporting the
            production of visual evidence.</p></div> <div><p>Until now, creating such reconstructions has been highly demanding,
            requiring advanced skills in specialist software such as GIS, 3D
            modeling, and video editing, while offering little opportunity for
            collaboration.</p> <p>Vantage supports this laborious but essential process by bringing
            all operational phases together through accessible web-based
            interfaces.</p> <p>Reconstructions can be exported as <strong>videos or interactive visualizations</strong>, supporting
            visual storytelling in investigative journalism.</p></div> <div><p>Funded by <a class="link" href="https://prototypefund.de/project/vantage/" target="_blank" rel="noopener noreferrer">Prototype Fund</a>, <strong>Vantage is open-source and freely accessible</strong>,
            ensuring that investigative tools are within reach for everyone.</p> <p><a class="link" href="mailto:hi@thometnanni.net">Write us</a> for
            more information, or follow our development on <a class="link" href="https://github.com/search?q=topic%3Avantage+org%3Athometnanni&amp;type=Repositories&amp;s=updated&amp;o=desc">GitHub</a>.</p> <p><a class="link" href="https://fidel.computer/">Fidel Thomet</a> & <a class="link" href="https://giacomo.website/">Giacomo Nanni</a></p></div></div></div></div> <!> <div class="info bg-white overflow-x-auto" style="padding: 20px 0;"><div class="flex gap-6 items-center m-auto" style="padding: 0 10px; white-space: nowrap;"><img src="/bmbf.svg" alt="" class="object-contain flex-shrink-0" style="max-width: 30%; max-height: 150px;"/> <img src="/pf.svg" alt="" class="object-contain flex-shrink-0" style="max-width: 30%; max-height: 150px;"/> <img src="/openc.svg" alt="" class="object-contain flex-shrink-0" style="max-width: 30%; max-height: 150px;"/></div></div></div>`);function Tt(e,r){ce(r,!1);let o=B(),v=B(!1);ae(()=>{L(v,!0);const l=setTimeout(()=>{d()},100),h=()=>d(),t=()=>d();return window.addEventListener("resize",h),window.addEventListener("scroll",t),window.addEventListener("load",d),()=>{clearTimeout(l),window.removeEventListener("resize",h),window.removeEventListener("scroll",t),window.removeEventListener("load",d)}});function d(){const l=document.getElementById("svgContainer");if(!l)return;l.querySelectorAll(".box-pair").forEach(t=>{const u=t.querySelectorAll(".box");if(u.length===2){const m=u[0],p=u[1],s=m.closest(".box-group")||m,y=p.closest(".box-group")||p,_=n(m,s),E=n(p,y),b=t.querySelectorAll(".connector-line");b.length>=4&&(c(b[0],_.topLeft,E.topLeft),c(b[1],_.topRight,E.topRight),c(b[2],_.bottomRight,E.bottomRight),c(b[3],_.bottomLeft,E.bottomLeft))}})}function n(l,h=null){const t=document.getElementById("svgContainer"),u=l.getBBox(),m=(h||l).getScreenCTM(),p=t.getBoundingClientRect(),s={topLeft:t.createSVGPoint(),topRight:t.createSVGPoint(),bottomRight:t.createSVGPoint(),bottomLeft:t.createSVGPoint()};s.topLeft.x=u.x,s.topLeft.y=u.y,s.topRight.x=u.x+u.width,s.topRight.y=u.y,s.bottomRight.x=u.x+u.width,s.bottomRight.y=u.y+u.height,s.bottomLeft.x=u.x,s.bottomLeft.y=u.y+u.height;for(let y in s)m&&(s[y]=s[y].matrixTransform(m)),s[y].y+=window.scrollY,s[y].x-=p.left;return s}function c(l,h,t){l.setAttribute("x1",h.x),l.setAttribute("y1",h.y),l.setAttribute("x2",t.x),l.setAttribute("y2",t.y)}de();var i=xt();Ze("1uha8ag",l=>{var h=ht();ee(14),Ue(()=>{We.title="Vantage"}),T(l,h)});var w=z(i),a=z(w);pt(a,{}),ee(2),I(w);var f=U(w,4);{var g=l=>{var h=mt(),t=z(h);dt(t,{}),I(h),T(l,h)};G(f,l=>{x(v)&&l(g)})}ee(2),I(i),ie(i,l=>L(o,l),()=>x(o)),T(e,i),fe()}export{Tt as component};
