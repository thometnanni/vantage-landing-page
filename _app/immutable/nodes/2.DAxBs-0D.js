import{f as R,a as T,c as de}from"../chunks/BArpSiJ7.js";import"../chunks/0waum1Sv.js";import{o as se}from"../chunks/BP7RbBvP.js";import{I as $,i as A,N as be,y as Y,j as Le,D as _e,g as u,av as Ce,F as Ie,H as Me,G as ve,J as D,A as F,Y as Ee,aq as Be,a8 as ge,q as Ne,z as te,C as Ve,ao as ae,aK as ze,W as pe,aG as I,aL as Ge,aM as Pe,aN as qe,aO as V,v as ke,x as Se,aP as Z,ak as re,an as Fe,w as He,aQ as $e,aR as De,aS as Oe,aT as je,aU as Ye,p as le,ax as C,n as z,o as N,m as ce,k as oe,t as O,s as U,a9 as ue,K as Ue,aV as We}from"../chunks/C9FWihKz.js";import{i as G,b as ne}from"../chunks/BvFvupHY.js";import{i as fe}from"../chunks/BY7w2Zq6.js";import{e as ee,s as he}from"../chunks/Yzwz9Dcx.js";function Ke(e,n,r){for(var v=[],f=n.length,i,c=n.length,a=0;a<f;a++){let o=n[a];Se(o,()=>{if(i){if(i.pending.delete(o),i.done.add(o),i.pending.size===0){var g=e.outrogroups;ie(ae(i.done)),g.delete(i),g.size===0&&(e.outrogroups=null)}}else c-=1},!1)}if(c===0){var m=v.length===0&&r!==null;if(m){var l=r,d=l.parentNode;Fe(d),d.append(l),e.items.clear()}ie(n,!m)}else i={pending:new Set(n),done:new Set},(e.outrogroups??=new Set).add(i)}function ie(e,n=!0){for(var r=0;r<e.length;r++)He(e[r],n)}var me;function Xe(e,n,r,v,f,i=null){var c=e,a=new Map;{var m=e;c=A?$(be(m)):m.appendChild(Y())}A&&Le();var l=null,d=Ce(()=>{var h=r();return ze(h)?h:h==null?[]:ae(h)}),o,g=!0;function p(){w.fallback=l,Je(w,o,c,n,v),l!==null&&(o.length===0?(l.f&V)===0?ke(l):(l.f^=V,H(l,null,c)):Se(l,()=>{l=null}))}var t=_e(()=>{o=u(d);var h=o.length;let s=!1;if(A){var x=Ie(c)===Me;x!==(h===0)&&(c=ve(),$(c),D(!1),s=!0)}for(var y=new Set,b=Ne,E=Ve(),_=0;_<h;_+=1){A&&F.nodeType===Ee&&F.data===Be&&(c=F,s=!0,D(!1));var S=o[_],k=v(S,_),L=g?null:a.get(k);L?(L.v&&ge(L.v,S),L.i&&ge(L.i,_),E&&b.skipped_effects.delete(L.e)):(L=Qe(a,g?c:me??=Y(),S,k,_,f,n,r),g||(L.e.f|=V),a.set(k,L)),y.add(k)}if(h===0&&i&&!l&&(g?l=te(()=>i(c)):(l=te(()=>i(me??=Y())),l.f|=V)),A&&h>0&&$(ve()),!g)if(E){for(const[W,M]of a)y.has(W)||b.skipped_effects.add(M.e);b.oncommit(p),b.ondiscard(()=>{})}else p();s&&D(!0),u(d)}),w={effect:t,items:a,outrogroups:null,fallback:l};g=!1,A&&(c=F)}function Je(e,n,r,v,f){var i=n.length,c=e.items,a=e.effect.first,m,l=null,d=[],o=[],g,p,t,w;for(w=0;w<i;w+=1){if(g=n[w],p=f(g,w),t=c.get(p).e,e.outrogroups!==null)for(const k of e.outrogroups)k.pending.delete(t),k.done.delete(t);if((t.f&V)!==0)if(t.f^=V,t===a)H(t,null,r);else{var h=l?l.next:a;t===e.effect.last&&(e.effect.last=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),B(e,l,t),B(e,t,h),H(t,h,r),l=t,d=[],o=[],a=l.next;continue}if((t.f&Z)!==0&&ke(t),t!==a){if(m!==void 0&&m.has(t)){if(d.length<o.length){var s=o[0],x;l=s.prev;var y=d[0],b=d[d.length-1];for(x=0;x<d.length;x+=1)H(d[x],s,r);for(x=0;x<o.length;x+=1)m.delete(o[x]);B(e,y.prev,b.next),B(e,l,y),B(e,b,s),a=s,l=b,w-=1,d=[],o=[]}else m.delete(t),H(t,a,r),B(e,t.prev,t.next),B(e,t,l===null?e.effect.first:l.next),B(e,l,t),l=t;continue}for(d=[],o=[];a!==null&&a!==t;)(m??=new Set).add(a),o.push(a),a=a.next;if(a===null)continue}(t.f&V)===0&&d.push(t),l=t,a=t.next}if(e.outrogroups!==null){for(const k of e.outrogroups)k.pending.size===0&&(ie(ae(k.done)),e.outrogroups?.delete(k));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||m!==void 0){var E=[];if(m!==void 0)for(t of m)(t.f&Z)===0&&E.push(t);for(;a!==null;)(a.f&Z)===0&&a!==e.fallback&&E.push(a),a=a.next;var _=E.length;if(_>0){var S=i===0?r:null;Ke(e,E,S)}}}function Qe(e,n,r,v,f,i,c,a){var m=(c&Pe)!==0?(c&qe)===0?I(r,!1,!1):pe(r):null,l=(c&Ge)!==0?pe(f):null;return{v:m,i:l,e:te(()=>(i(n,m??r,l??f,a),()=>{e.delete(v)}))}}function H(e,n,r){if(e.nodes)for(var v=e.nodes.start,f=e.nodes.end,i=n&&(n.f&V)===0?n.nodes.start:r;v!==null;){var c=re(v);if(i.before(v),v===f)return;v=c}}function B(e,n,r){n===null?e.effect.first=r:n.next=r,r===null?e.effect.last=n:r.prev=n}function Ze(e,n){let r=null,v=A;var f;if(A){r=F;for(var i=be(document.head);i!==null&&(i.nodeType!==Ee||i.data!==e);)i=re(i);if(i===null)D(!1);else{var c=re(i);i.remove(),$(c)}}A||(f=document.head.appendChild(Y()));try{_e(()=>n(f),$e)}finally{v&&(D(!0),$(r))}}function et(e,n){return e==null?null:String(e)}function xe(e,n,r,v){var f=e.__style;if(A||f!==n){var i=et(n);(!A||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=n}return v}const tt=Symbol("is custom element"),rt=Symbol("is html");function we(e,n,r,v){var f=ot(e);A&&(f[n]=e.getAttribute(n),n==="src"||n==="srcset"||n==="href"&&e.nodeName==="LINK")||f[n]!==(f[n]=r)&&(n==="loading"&&(e[De]=r),r==null?e.removeAttribute(n):typeof r!="string"&&nt(e).includes(n)?e[n]=r:e.setAttribute(n,r))}function ot(e){return e.__attributes??={[tt]:e.nodeName.includes("-"),[rt]:e.namespaceURI===Oe}}var ye=new Map;function nt(e){var n=e.getAttribute("is")||e.nodeName,r=ye.get(n);if(r)return r;ye.set(n,r=[]);for(var v,f=e,i=Element.prototype;i!==f;){v=Ye(f);for(var c in v)v[c].set&&r.push(c);f=je(f)}return r}var it=R('<div class="p-8 text-center text-red-600"> </div>'),st=R('<p class="text-sm text-gray-400 max-w-xs"> </p>'),at=R('<div class="flex flex-col items-start gap-2"><img class="flex-shrink-0 object-contain rounded" style="max-height: 450px;"/> <!></div>'),lt=R('<div class="flex gap-2 flex-nowrap w-max p-2"></div>'),ct=R('<div class="p-8 text-center text-gray-600">No images found</div>'),ft=R('<div class="gallery w-full overflow-x-auto scroll-smooth svelte-1ocen1q" style="scrollbar-width: none;" role="region" aria-label="gallery"><!></div>');function dt(e,n){le(n,!1);let r=I([]),v=I(!0),f=I(null),i=I(),c=I(),a=!0,m=!1;const l=30;se(async()=>{try{const x=await(await fetch("https://api.are.na/v2/channels/vantage-3vctc210p7q")).json();C(r,x.contents.map(y=>({title:y.title||"",url:y.image.display.url})).reverse()),C(v,!1)}catch(s){C(f,s.message),C(v,!1),console.error("Error fetching Are.na channel:",s)}});function d(s){if(!a||!u(i)||!u(c))return;const x=u(i).getBoundingClientRect().width,y=u(c).getBoundingClientRect().width;if(y<=x)return;const b=u(i).getBoundingClientRect(),_=(s.clientX-b.left-l)/(x-l*2),S=y-x;m=!0,u(i).scrollTo({left:S*_,behavior:"instant"}),requestAnimationFrame(()=>m=!1)}function o(){a=!0}function g(){m||(a=!1)}fe();var p=ft(),t=z(p);{var w=s=>{},h=s=>{var x=de(),y=oe(x);{var b=_=>{var S=it(),k=z(S);N(S),O(()=>he(k,`Error: ${u(f)??""}`)),T(_,S)},E=_=>{var S=de(),k=oe(S);{var L=M=>{var P=lt();Xe(P,5,()=>u(r),q=>q.url,(q,j)=>{var K=at(),X=z(K),Te=U(X,2);{var Ae=J=>{var Q=st(),Re=z(Q,!0);N(Q),O(()=>he(Re,u(j).title)),T(J,Q)};G(Te,J=>{u(j).title&&J(Ae)})}N(K),O(()=>{we(X,"src",u(j).url),we(X,"alt",u(j).title)}),T(q,K)}),N(P),ne(P,q=>C(c,q),()=>u(c)),T(M,P)},W=M=>{var P=ct();T(M,P)};G(k,M=>{u(r).length>0?M(L):M(W,!1)},!0)}T(_,S)};G(y,_=>{u(f)?_(b):_(E,!1)},!0)}T(s,x)};G(t,s=>{u(v)?s(w):s(h,!1)})}N(p),ne(p,s=>C(i,s),()=>u(i)),ee("mousemove",p,d),ee("mouseenter",p,o),ee("scroll",p,g),T(e,p),ce()}var vt=R('<div class="absolute z-[-1px] flex items-start justify-start bg-white pointer-events-auto"><p class="text-base leading-tight text-left text-black m-0 p-3 overflow-hidden">Vantage reconstructs the spatial context of video recordings.</p></div>'),gt=R('<div class="absolute z-[-1px] bg-white overflow-hidden pointer-events-auto"><video autoplay loop src="/demo.mp4" class="w-full h-full object-cover"></video></div>',2),pt=R('<div class="fixed top-2 right-2 z-4 gap-1 flex flex-col items-end"><a href="https://thometnanni.github.io/vantage-renderer/" target="_blank" rel="noopener noreferrer" class="text-xs pointer-events-auto svelte-rl21xe">Renderer</a> <a href="mailto:hi@thometnanni.net" class="text-xs pointer-events-auto svelte-rl21xe">Contact us</a></div> <!> <!>',1);function ut(e,n){le(n,!1);let r=I({x:0,y:0,width:0,height:0}),v=I({x:0,y:0,width:0,height:0});function f(){const d=document.getElementById("svgContainer");if(!d)return;const o=d.getBoundingClientRect(),g=d.querySelector(".box-group.rotate rect");if(g){const t=g.getBBox(),w=g.closest(".box-group").getScreenCTM(),h=d.createSVGPoint();h.x=t.x,h.y=t.y;const s=h.matrixTransform(w);C(r,{x:s.x-o.left,y:s.y+window.scrollY,width:t.width,height:t.height})}const p=d.querySelector(".box-group:not(.rotate) rect");if(p){const t=p.getBBox(),w=p.closest(".box-group").getScreenCTM(),h=d.createSVGPoint();h.x=t.x,h.y=t.y;const s=h.matrixTransform(w);C(v,{x:s.x-o.left,y:s.y+window.scrollY,width:t.width,height:t.height})}}se(()=>{f();const d=()=>f(),o=()=>f();return window.addEventListener("resize",d),window.addEventListener("scroll",o),()=>{window.removeEventListener("resize",d),window.removeEventListener("scroll",o)}}),fe();var i=pt(),c=U(oe(i),2);{var a=d=>{var o=vt();O(()=>xe(o,`
      left: ${u(r).x}px;
      top: ${u(r).y}px;
      width: ${u(r).width}px;
      height: ${u(r).height}px;
      transform: rotate(-25deg);
      transform-origin: top left;
    `)),T(d,o)};G(c,d=>{u(r).width>0&&d(a)})}var m=U(c,2);{var l=d=>{var o=gt(),g=z(o);g.muted=!0,N(o),O(()=>xe(o,`
      left: ${u(v).x}px;
      top: ${u(v).y}px;
      width: ${u(v).width}px;
      height: ${u(v).height}px;
    `)),T(d,o)};G(m,d=>{u(v).width>0&&d(l)})}T(e,i),ce()}var ht=R('<meta name="description" content="Vantage reconstructs the spatial context of video recordings."/> <meta property="og:title" content="Vantage"/> <meta property="og:description" content="Vantage reconstructs the spatial context of video recordings."/> <meta property="og:image" content="/cover.jpg"/> <meta property="twitter:card" content="summary_large_image"/> <meta property="twitter:title" content="Vantage"/> <meta property="twitter:description" content="Vantage reconstructs the spatial context of video recordings."/> <meta property="twitter:image" content="/cover.jpg"/>',1),mt=R('<div class="relative z-10 bg-white py-4"><!></div>'),xt=R(`<div class="introContainer"><!> <svg id="svgContainer" xmlns="http://www.w3.org/2000/svg"><g class="box-pair"><g class="box box-group rotate"><rect x="0" y="0" width="300" height="200"></rect></g><g class="lines"><line class="connector-line" stroke="var(--stroke, lime)" stroke-width="2"></line><line class="connector-line" stroke="var(--stroke, lime)" stroke-width="2"></line><line class="connector-line" stroke="var(--stroke, lime)" stroke-width="2"></line><line class="connector-line" stroke="var(--stroke, lime)" stroke-width="2"></line></g><g class="box box-group box"><rect x="30%" y="200" width="65%" height="460"></rect></g></g></svg> <div class="info p-2"><div><p><strong>Vantage</strong> is a web-based suite of <strong>spatial reconstruction toolkits for analysing photos and videos</strong>, designed for <strong>investigative journalists and fact-checkers</strong>,
        particularly those working in small teams or independently.</p></div> <div><p>Images and videos sourced from social media often represent crucial
        working material â€” and, in conflict areas, sometimes the only available
        source.</p> <p>This persuasive visual material demands rigorous verification: do the
        time and place of the footage correspond to the claimed event? What is
        actually visible in the images? How do clips from different angles
        relate to each other?</p> <p>Vantage enables perspectival reconstruction by projecting images and
        videos onto <strong>3D models of terrain and buildings</strong>, supporting the
        production of visual evidence.</p></div> <div><p>Until now, creating such reconstructions has been highly demanding,
        requiring advanced skills in specialist software such as GIS, 3D
        modeling, and video editing, while offering little opportunity for
        collaboration.</p> <p>Vantage supports this laborious but essential process by bringing all
        operational phases together through accessible web-based interfaces.</p> <p>Reconstructions can be exported as <strong>videos or interactive visualizations</strong>, supporting visual
        storytelling in investigative journalism.</p></div> <div><p>Funded by <a class="link" href="https://prototypefund.de/project/vantage/" target="_blank" rel="noopener noreferrer">Prototype Fund</a>, <strong>Vantage is open-source and freely accessible</strong>,
        ensuring that investigative tools are within reach for everyone.</p> <p><a class="link" href="mailto:hi@thometnanni.net">Write us</a> for more
        information, or follow our development on <a class="link" href="https://github.com/search?q=topic%3Avantage+org%3Athometnanni&amp;type=Repositories&amp;s=updated&amp;o=desc">GitHub</a>.</p> <p><a class="link" href="https://fidel.computer/">Fidel Thomet</a> & <a class="link" href="https://giacomo.website/">Giacomo Nanni</a></p></div></div> <!> <div class="info bg-white overflow-x-auto" style="padding: 20px 0;"><div class="flex gap-6 items-center m-auto" style="padding: 0 10px; white-space: nowrap;"><img src="/bmbf.svg" alt="" class="object-contain flex-shrink-0" style="max-width: 30%; max-height: 150px;"/> <img src="/pf.svg" alt="" class="object-contain flex-shrink-0" style="max-width: 30%; max-height: 150px;"/> <img src="/openc.svg" alt="" class="object-contain flex-shrink-0" style="max-width: 30%; max-height: 150px;"/></div></div></div>`);function Tt(e,n){le(n,!1);let r=I(),v=I(!1);se(()=>{C(v,!0);const o=setTimeout(()=>{f()},100),g=()=>f(),p=()=>f();return window.addEventListener("resize",g),window.addEventListener("scroll",p),window.addEventListener("load",f),()=>{clearTimeout(o),window.removeEventListener("resize",g),window.removeEventListener("scroll",p),window.removeEventListener("load",f)}});function f(){const o=document.getElementById("svgContainer");if(!o)return;o.querySelectorAll(".box-pair").forEach(p=>{const t=p.querySelectorAll(".box");if(t.length===2){const w=t[0],h=t[1],s=w.closest(".box-group")||w,x=h.closest(".box-group")||h,y=i(w,s),b=i(h,x),E=p.querySelectorAll(".connector-line");E.length>=4&&(c(E[0],y.topLeft,b.topLeft),c(E[1],y.topRight,b.topRight),c(E[2],y.bottomRight,b.bottomRight),c(E[3],y.bottomLeft,b.bottomLeft))}})}function i(o,g=null){const p=document.getElementById("svgContainer"),t=o.getBBox(),w=(g||o).getScreenCTM(),h=p.getBoundingClientRect(),s={topLeft:p.createSVGPoint(),topRight:p.createSVGPoint(),bottomRight:p.createSVGPoint(),bottomLeft:p.createSVGPoint()};s.topLeft.x=t.x,s.topLeft.y=t.y,s.topRight.x=t.x+t.width,s.topRight.y=t.y,s.bottomRight.x=t.x+t.width,s.bottomRight.y=t.y+t.height,s.bottomLeft.x=t.x,s.bottomLeft.y=t.y+t.height;for(let x in s)w&&(s[x]=s[x].matrixTransform(w)),s[x].y+=window.scrollY,s[x].x-=h.left;return s}function c(o,g,p){o.setAttribute("x1",g.x),o.setAttribute("y1",g.y),o.setAttribute("x2",p.x),o.setAttribute("y2",p.y)}fe();var a=xt();Ze("1uha8ag",o=>{var g=ht();ue(14),Ue(()=>{We.title="Vantage"}),T(o,g)});var m=z(a);ut(m,{});var l=U(m,6);{var d=o=>{var g=mt(),p=z(g);dt(p,{}),N(g),T(o,g)};G(l,o=>{u(v)&&o(d)})}ue(2),N(a),ne(a,o=>C(r,o),()=>u(r)),T(e,a),ce()}export{Tt as component};
